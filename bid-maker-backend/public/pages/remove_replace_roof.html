<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Taufiq Pias" />
    <title>R&R Roof - BMT</title>
    <link rel="icon" type="image/x-icon" href="..\Images\Favicon.png" />
    <link rel="stylesheet" href="styles.css" />
    <script>
      (function () {
        const savedMode = localStorage.getItem("themeMode");
        const prefersDark = window.matchMedia(
          "(prefers-color-scheme: dark)"
        ).matches;
        if (savedMode === "dark" || (!savedMode && prefersDark)) {
          document.documentElement.classList.add("dark-mode"); // Changed to <html>
        }
        // Only collapse .info-content on mobile initially
        if (window.matchMedia("(max-width: 1200px)").matches) {
          document.querySelectorAll(".info-content").forEach((el) => {
            el.classList.add("collapsed");
          });
        }
      })();
    </script>
    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-M2K232X4B3"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-M2K232X4B3");
    </script>

    <script type="text/javascript">
      (function (c, l, a, r, i, t, y) {
        c[a] =
          c[a] ||
          function () {
            (c[a].q = c[a].q || []).push(arguments);
          };
        t = l.createElement(r);
        t.async = 1;
        t.src = "https://www.clarity.ms/tag/" + i;
        y = l.getElementsByTagName(r)[0];
        y.parentNode.insertBefore(t, y);
      })(window, document, "clarity", "script", "qj1sdmrlho");
    </script>
  </head>

  <body>
    <div class="main-container">
      <!-- Information Area -->
      <div class="info-container">
        <button class="toggle-btn">Toggle Information</button>
        <div class="info-content">
          <h2>Information</h2>
          <p>
            Fill out the form accordingly to generate a bid. The following
            prices are provided as a ranged parameter taken from RepairBase
            2024.
          </p>
          <h3 style="text-align: center; color: brown">
            Auto Calculator Active
          </h3>
          <p style="text-align: center; color: rgb(4, 119, 21)">
            Auto calculator activated means Depending on the logical situation,
            you do not have to put an input for
            <b
              >Underlayment, Ridg cap, Ridge Vent, Flashing, Edge Metal &
              Generated Debris</b
            >. These will be calculated autometically.
          </p>
          <p>
            <b>For Additional Item:</b>If it requires to remove
            Gutter/Fascia/Soffit/Sattelite Antenna from the roof, please go to
            the following links and make conjunction bid. <br />
          </p>
          <p
            style="
              justify-content: center;
              text-align: center;
              align-items: center;
            "
          >
            <a
              href="../pages/gutter.html"
              title="Remove/Replace - Gutter, Downspout, Extension"
              >Gutter & Downspout</a
            >
            <br /><br />
            <a
              href="../pages/fascia_soffit.html"
              title="Remove/Replace - Fascia, Soffit"
              >Fascia & Soffit</a
            >
            <br /><br />
            <a
              href="../pages/remove_relocate_special_items.html"
              title="Satellite Antenna"
              >Satellite Antenna</a
            >
          </p>

          <b>
            <p style="color: brown">
              ***Consult with your Team Lead before submitting the price.***
            </p>
          </b>
          <b>
            <p style="color: brown">
              ***Please copy the bids before visiting other pages. Bids will not
              be saved once redirected.***
            </p>
          </b>
        </div>
      </div>

      <div class="container">
        <button class="toggle-btn">Toggle Form</button>
        <div class="division">
          <h1>Roof Bid</h1>
          <h2>R&R Roof Bids</h2>
          <form id="Form">
            <label for="bidPrefix"
              >Bid Prefix (for conjunction bid - Use a colon after
              prefix)</label
            >
            <input
              type="text"
              id="bidPrefix"
              name="bidPrefix"
              placeholder="Title: / Title-"
            />

            <label for="action">Select an Action:*</label>
            <select id="action" name="action" required>
              <option value="">--Select an Action--</option>
              <option value="remove">Remove</option>
              <option value="replace">Replace</option>
            </select>

            <label for="rooftype">Select a Roof Type:*</label>
            <select id="rooftype" name="rooftype" required>
              <option value="">--Select a roof type--</option>
              <option value="asphalt shingle">Asphalt Shingle</option>
              <option value="flat">Flat</option>
              <option value="metal">Metal</option>
              <option value="clay tile">Clay Tile</option>
            </select>

            <!-- Wrapped in a container -->
            <div id="flatrtContainer">
              <label for="flatrt">Choose a Flat Roof Type:</label>
              <select id="flatrt" name="flatrt">
                <option value="">--Select an Option--</option>
                <option value="Rolled">Rolled</option>
                <option value="Hot Mopped">Hot Mopped</option>
              </select>
            </div>

            <label for="dmglvl">Select a Roof Damage Level:*</label>
            <select id="dmglvl" name="dmglvl" required>
              <option value="">--Select a roof damage level--</option>
              <option value="Roofing Only">Roofing Only</option>
              <option value="Roofing + Sheathing">Roofing + Sheathing</option>
              <option value="Roofing + Sheathing + Rafter">
                Roofing + Sheathing + Rafter
              </option>
            </select>

            <label for="length">Roof Length:*</label>
            <input type="number" id="length" name="length" step="1" required />

            <label for="width">Roof Width:*</label>
            <input type="number" id="width" name="width" step="1" required />

            <!-- Wrapped in a container -->
            <div id="shthngContainer">
              <label for="shthng"
                >What % of Sheathing Needs Removing/Replacing?*</label
              >
              <input
                type="number"
                id="shthng"
                name="shthng"
                min="0"
                max="100"
                step="1.0"
                placeholder="Put a value between 0-100 %"
              />
            </div>

            <!-- Wrapped in a container -->
            <div id="rftrContainer">
              <label for="rftr"
                >What % of Rafter Needs Removing/Replacing?*</label
              >
              <input
                type="number"
                id="rftr"
                name="rftr"
                min="0"
                max="100"
                step="1.0"
                placeholder="Put a value between 0-100 %"
              />
            </div>

            <!-- Wrapped in a container -->
            <div id="rventContainer">
              <label for="rvent">How Many Roof Vents?*</label>
              <input type="number" id="rvent" name="rvent" step="1" />
            </div>

            <!-- Wrapped in a container -->
            <div id="rtoilContainer">
              <label for="rtoil">How Many Toilets?*</label>
              <input type="number" id="rtoil" name="rtoil" step="1" />
            </div>

            <!-- Wrapped in a container -->
            <div id="chmnContainer">
              <label for="chmn">Is there a Chimney?*</label>
              <select id="chmn" name="chmn">
                <option value="">--Select an Option--</option>
                <option value="16">Yes</option>
                <option value="0">No</option>
              </select>
            </div>

            <!-- Wrapped in a container -->
            <div id="debrisFieldContainer">
              <label for="dumpster">Dumpster needed?</label>
              <select id="dumpster" name="dumpster">
                <option value="">--Select Any--</option>
                <option value="">Not Needed</option>
                <option value="20 C.Y./2 Ton">
                  Dumpster - Small - 20 C.Y./2 Ton
                </option>
                <option value="30 C.Y./3 Ton">
                  Dumpster - Medium - 30 C.Y./3 Ton
                </option>
                <option value="40 C.Y./4 Ton">
                  Dumpster - Large - 40 C.Y./4 Ton
                </option>
                <option value="60 C.Y./6 Ton">
                  Dumpster - Extra Large - 60 C.Y./6 Ton
                </option>
              </select>
            </div>

            <label for="pmt">Permit Needed?*</label>
            <select id="pmt" name="pmt">
              <option value="">--Select an Option--</option>
              <option value="Yes - Permit cost included">Yes</option>
              <option value="No">No</option>
            </select>

            <label for="additionalInfo">Additional information:</label>
            <textarea
              id="additionalInfo"
              name="additionalInfo"
              placeholder="Disclaimers or any other comment"
            ></textarea>

            <label for="conj">Make this bid conjunction to:</label>
            <input
              type="text"
              id="conj"
              name="conj"
              placeholder="Bid name only"
            />

            <label for="price">Price (in USD):</label>
            <input type="number" id="price" name="price" step="0.01" />

            <button type="submit">Generate Bid</button>
            <a href="https://www.google.com/maps" target="_blank" id="measure"
              >Measure The Roof</a
            >
          </form>
        </div>
      </div>

      <!-- New Note Section -->
      <div class="note-container">
        <h2>Bids</h2>
        <div id="notesList" class="notes-list">
          <!-- Notes will be dynamically added here -->
        </div>
        <button id="copyAllBidsButton">Copy All Bids</button>
        <a href="../index.html" id="home">
          <ion-icon name="home"></ion-icon> Go Home</a
        >
      </div>
    </div>

    <div id="floatingMessage" class="floating-message">Copied!</div>

    <!-- Script to Generate Bid -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const actionDropdown = document.getElementById("action");
        const rooftypeDropdown = document.getElementById("rooftype");
        const dmglvlDropdown = document.getElementById("dmglvl");

        const replaceContainers = [
          "rventContainer",
          "rtoilContainer",
          "chmnContainer",
        ];
        const removeContainer = ["debrisFieldContainer"];
        const flatRoofContainer = ["flatrtContainer"];
        const sheathingContainer = ["shthngContainer"];
        const rafterContainer = ["rftrContainer"];

        function toggleContainers(containers, show) {
          containers.forEach((containerId) => {
            const container = document.getElementById(containerId);
            if (container) {
              container.style.display = show ? "block" : "none";
              if (!show) {
                // Reset the field value when hidden
                const input = container.querySelector("input, select");
                if (input) input.value = "";
              }
            }
          });
        }

        function updateFieldVisibility() {
          const action = actionDropdown.value;
          const rooftype = rooftypeDropdown.value;
          const dmglvl = dmglvlDropdown.value;

          // Toggle containers based on action
          toggleContainers(replaceContainers, action === "replace");
          toggleContainers(removeContainer, action === "remove");

          // Toggle containers based on rooftype
          toggleContainers(flatRoofContainer, rooftype === "flat");

          // Toggle containers based on dmglvl
          toggleContainers(
            sheathingContainer,
            dmglvl === "Roofing + Sheathing" ||
              dmglvl === "Roofing + Sheathing + Rafter"
          );
          toggleContainers(
            rafterContainer,
            dmglvl === "Roofing + Sheathing + Rafter"
          );
        }

        actionDropdown.addEventListener("change", updateFieldVisibility);
        rooftypeDropdown.addEventListener("change", updateFieldVisibility);
        dmglvlDropdown.addEventListener("change", updateFieldVisibility);

        // Initial call to set the correct visibility on page load
        updateFieldVisibility();
      });
    </script>

    <!-- Script to Generate Bid -->
    <script>
      document
        .getElementById("Form")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          // Get form values
          const bidPrefix = document.getElementById("bidPrefix").value;
          const action = document.getElementById("action").value;
          const rooftype = document.getElementById("rooftype").value;
          const flatrt = document.getElementById("flatrt").value;
          const dmglvl = document.getElementById("dmglvl").value;
          const length = parseFloat(document.getElementById("length").value);
          const width = parseFloat(document.getElementById("width").value);
          const shthng = parseFloat(document.getElementById("shthng").value);
          const rftr = parseFloat(document.getElementById("rftr").value);
          const rvent = parseFloat(document.getElementById("rvent").value);
          const rtoil = parseFloat(document.getElementById("rtoil").value);
          const chmn = document.getElementById("chmn").value;
          const dumpster = document.getElementById("dumpster").value;
          const additionalInfo =
            document.getElementById("additionalInfo").value;
          const conj = document.getElementById("conj").value;
          const pmt = document.getElementById("pmt").value;
          const price = parseFloat(document.getElementById("price").value || 0);

          let bidText = "";

          if (action === "remove") {
            if (dmglvl === "Roofing Only") {
              bidText = `${bidPrefix} Need to tear off & remove ${length} x ${width} = ${
                length * width
              }sf of ${rooftype} ${
                flatrt ? `(${flatrt})` : ""
              } roof to address the existing roof damage. Will generate approx ${Math.ceil(
                (length * width * 0.5) / 27
              )}cyds of debris. ${
                dumpster
                  ? `Will require 1 (${dumpster}) dumpster to haul away all the generated debris.`
                  : ""
              }. ***After removing the roof, if we find any new damage, will provide bid for those.***`;
            } else if (dmglvl === "Roofing + Sheathing") {
              bidText = `${bidPrefix} Need to tear off & remove ${length} x ${width} = ${
                length * width
              }sf of ${rooftype} ${
                flatrt ? `(${flatrt})` : ""
              } roof - including ${Math.ceil(
                length * width * (shthng / 100)
              )}sf of sheathing, to address the existing roof damage. Will generate approx ${Math.ceil(
                (length * width * 0.6) / 27
              )}cyds of debris. ${
                dumpster
                  ? `Will require 1 (${dumpster}) dumpster to haul away all the generated debris.`
                  : ""
              }. ***After removing the roof, if we find any new damage, will provide bid for those.***`;
            } else if (dmglvl === "Roofing + Sheathing + Rafter") {
              bidText = `${bidPrefix} Need to tear off & remove ${length} x ${width} = ${
                length * width
              }sf of ${rooftype} ${
                flatrt ? `(${flatrt})` : ""
              } roof - including ${Math.ceil(
                length * width * (shthng / 100)
              )}sf of sheathing and ${Math.ceil(
                length * width * (rftr / 100)
              )}sf of rafter, to address the existing roof damage - ***Structurally Unsafe***. Will generate approx ${Math.ceil(
                (length * width * 0.5 + length * width * (rftr / 100) * 0.8) /
                  27
              )}cyds of debris. ${
                dumpster
                  ? `Will require 1 (${dumpster}) dumpster to haul away all the generated debris.`
                  : ""
              }. ***After removing the roof, if we find any new damage, will provide bid for those.***`;
            }
          } else if (action === "replace") {
            if (rooftype === "asphalt shingle") {
              bidText = `${bidPrefix} Need to replace ${length} x ${width} = ${
                length * width
              }sf of ${rooftype} ${
                flatrt ? `${flatrt}` : ""
              } roof as a part of roof renovation. Replacing roof requires but not limited to following items - 
Roofing Material: ${length} x ${width} = ${
                length * width
              }sf of Basic 3 Tab (25-40) Year Asphalt Shingle,
Underlayment- 30# Felt: ${
                (length * width * 2) / 3
              }sf of Single Layer Felt Paper,
Underlayment- Ice/Water Shield: ${
                (length * width * 1) / 3
              }sf of Single Layer Ice barrier,${
                shthng
                  ? `\n5/8\" Sheathing Deck: ${Math.ceil(
                      length * width * (shthng / 100)
                    )}sf`
                  : ""
              },${
                rftr
                  ? `\n2\" x 14\"-16\" O.C Rafters: ${Math.ceil(
                      length * width * (rftr / 100)
                    )}sf`
                  : ""
              },
Flashing 0.032\" thick: ${2 * length} + ${chmn ? `${chmn}` : ""}LF,
Edge Metal - Galvanized - 3x3: ${2 * (length + width)}LF,
Roof Vents - Medium: ${rvent}EA,
Roof Jack - upto 6\": ${rtoil}EA,
Ridge Cap & vent: ${length}LF.`;
            } else if (rooftype === "flat") {
              bidText = `${bidPrefix} Need to replace ${length} x ${width} = ${
                length * width
              }sf of ${rooftype} ${
                flatrt ? `${flatrt}` : ""
              } roof as a part of roof renovation. Replacing roof requires but not limited to following items - 
Roofing Material: ${length} x ${width} = ${
                length * width
              }sf of ${flatrt} roofing material,
Underlayment- 30# Felt: ${
                (length * width * 2) / 3
              }sf of Single Layer Felt Paper,
Underlayment- Ice/Water Shield: ${
                (length * width * 1) / 3
              }sf of Single Layer Ice barrier,${
                shthng
                  ? `\n5/8\" Sheathing Deck: ${Math.ceil(
                      length * width * (shthng / 100)
                    )}sf`
                  : ""
              },${
                rftr
                  ? `\n2\" x 14\"-16\" O.C Rafters: ${Math.ceil(
                      length * width * (rftr / 100)
                    )}sf`
                  : ""
              },
Flashing 0.032\" thick: ${2 * length} + ${chmn ? `${chmn}` : ""}LF,
Edge Metal - Galvanized - 3x3: ${2 * (length + width)}LF,
Roof Vents - Medium: ${rvent}EA,
Roof Jack - upto 6\": ${rtoil}EA.`;
            } else if (rooftype === "metal") {
              bidText = `${bidPrefix} Need to replace ${length} x ${width} = ${
                length * width
              }sf of ${rooftype} ${
                flatrt ? `${flatrt}` : ""
              } roof as a part of roof renovation. Replacing roof requires but not limited to following items - 
Roofing Material: ${length} x ${width} = ${
                length * width
              }sf of corrugated metal roofing material,
Underlayment- 30# Felt: ${
                (length * width * 2) / 3
              }sf of Single Layer Felt Paper,
Underlayment- Ice/Water Shield: ${
                (length * width * 1) / 3
              }sf of Single Layer Ice barrier,${
                shthng
                  ? `\n5/8\" Sheathing Deck: ${Math.ceil(
                      length * width * (shthng / 100)
                    )}sf`
                  : ""
              },${
                rftr
                  ? `\n2\" x 14\"-16\" O.C Rafters: ${Math.ceil(
                      length * width * (rftr / 100)
                    )}sf`
                  : ""
              },
Flashing 0.032\" thick: ${2 * length} + ${chmn ? `${chmn}` : ""}LF,
Edge Metal - Galvanized - 3x3: ${2 * (length + width)}LF,
Roof Vents - Medium: ${rvent}EA,
Roof Jack - upto 6\": ${rtoil}EA,
Ridge Cap  & vent: ${length}LF.`;
            } else if (rooftype === "clay tile") {
              bidText = `${bidPrefix} Need to replace ${length} x ${width} = ${
                length * width
              }sf of ${rooftype} ${
                flatrt ? `${flatrt}` : ""
              } roof as a part of roof renovation. Replacing roof requires but not limited to following items - 
Roofing Material: ${length} x ${width} = ${length * width}sf of clay tiles,
Underlayment- 30# Felt: ${
                (length * width * 2) / 3
              }sf of Single Layer Felt Paper,
Underlayment- Ice/Water Shield: ${
                (length * width * 1) / 3
              }sf of Single Layer Ice barrier,${
                shthng
                  ? `\n5/8\" Sheathing Deck: ${Math.ceil(
                      length * width * (shthng / 100)
                    )}sf`
                  : ""
              },${
                rftr
                  ? `\n2\" x 14\"-16\" O.C Rafters: ${Math.ceil(
                      length * width * (rftr / 100)
                    )}sf`
                  : ""
              },
Flashing 0.032\" thick: ${2 * length} + ${chmn ? `${chmn}` : ""}LF,
Edge Metal - Galvanized - 3x3: ${2 * (length + width)}LF,
Roof Vents - Medium: ${rvent}EA,
Roof Jack - upto 6\": ${rtoil}EA,
Ridge Cap  & vent: ${length}LF.`;
            }
          }

          // Format the price with commas
          const formattedPrice = price.toLocaleString("en-US", {
            style: "decimal",
            minimumFractionDigits: 2,
            maximumFractionDigits: 2,
          });

          // Append additional information and price to the bid text
          bidText += `\nPermit Needed: ${pmt}\nWill require Ladder, Scafolding, Nail guns, Safety gears and other equipment.\n${additionalInfo}\nPrice: $${formattedPrice}`;

          // Save the bid as a note
          saveBidAsNote(bidText);
        });

      function saveBidAsNote(bidText) {
        const notesList = document.getElementById("notesList");
        const noteElement = document.createElement("div");
        noteElement.className = "note";
        noteElement.textContent = bidText;
        notesList.appendChild(noteElement);
      }
    </script>
    <script src="script_other.js"></script>
    <script src="..\dark_mode.js"></script>
    <script src="blocker.js"></script>
  </body>
</html>
